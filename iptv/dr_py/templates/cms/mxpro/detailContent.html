<!DOCTYPE html>
<html>
<head>
<title>{{ctx.vod_name}}详情介绍-{{ctx.vod_name}}在线观看-{{ctx.vod_name}}迅雷下载 - {{ctx.web_name}}</title>
<meta name="referrer" content="no-referrer" />
<meta name="keywords" content="{{ctx.vod_name}}在线收看,{{ctx.vod_name}}迅雷下载" />
<meta name="description" content="{{ctx.vod_name}}剧情:" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE10" />
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link rel="shortcut icon" href="/static/img/favicon.svg" type="image/x-icon" />
<link rel="stylesheet" href="/web/cms/mxpro/css/iconfont.css" type="text/css" />
<link rel="stylesheet" href="/web/cms/mxpro/css/stui_default.css" type="text/css" />
<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.cookie.min.js "></script>
<script type="text/javascript" src="/static/js/jquery.lazyload.min.js "></script>
<script type="text/javascript" src="/web/cms/mxpro/js/index.js"></script>
<script type="text/javascript" src="/web/cms/mxpro/js/home.js"></script>

<script src="/static/js/vue3.js"></script>
<script src="/static/js/axios.min.js"></script>
<script src="/static/js/eruda.js"></script>

<script type="text/javascript" src="/web/cms/mxpro/js/commonUtil.js"></script>
<script src="/web/cms/mxpro/js/commonUI.js"></script>
<link rel="stylesheet" href="/web/cms/mxpro/css/commonUI.css" type="text/css" />
<script>var maccms={"path":"","mid":"1","url":"5imv.cc","wapurl":"www.5imv.cc","mob_status":"2"};</script>
<!--[if lt IE 9]>
<script src="/web/cms/mxpro/js/html5shiv.min.js"></script>
<script src="/web/cms/mxpro/js/respond.min.js"></script>
<![endif]-->

</head>
<body>
<div id="app">
	<!--vue组件-头部导航-->
	<stu-header :ctx="ctx" :items="items" :hotsuggs="hotsuggs" :is_home="is_home" :tid="tid"></stu-header>

    <div class="container">
        <div class="row">

		<div class="stui-pannel clearfix">
		<div class="stui-pannel-box">
			<div class="stui-pannel__bd">
				<div class="stui-content">
					<div class="stui-content__thumb">
						<a class="pic" title="{{ctx.vod_name}}">
							<img class="lazyload" :data-original="dinfo.vod_pic" src="/web/cms/mxpro/img/load.gif" v-show="!iframeShow" @click.self="showBigImage($event)"/>
							<stu-image :visible="photoVisible" :url="dinfo.vod_pic" @close_image="photoVisible=false"></stu-image>
							<button v-show="iframeShow" onclick="openFullScreen()">全屏播放</button>
							<button v-show="iframeShow" @click="openTestVideo">测试直链</button>
							<iframe id="iframe-player" :src="iframeSrc" v-show="iframeShow"
							allowfullscreen="true" allowtransparency="true" webkitallowfullscreen="true" mozallowfullscreen="true"
							allow-same-origin="true" autoplay=1
							name="iframe-player" scrolling="no" frameborder="0" ref="iframeRef"
							></iframe>
						</a>
					</div>
					<div class="stui-content__detail">
						<h1 class="title">{{ctx.vod_name}}</h1>
						<p class="data hidden-xs">{[dinfo.type_name]}</p>
						<p class="data visible-xs">状态：<span style="color: #fdf751;">{[dinfo.vod_remarks]}</span></p>
						<p class="data visible-xs">{[dinfo.vod_area]}</p>
						<p class="data visible-xs">{[dinfo.vod_year]}</p>
						<p class="data">{[dinfo.vod_director]}</p>
						<p class="data">{[dinfo.vod_actor]}</p>
						<p class="data hidden-xs">{[dinfo.vod_remarks]}</p>
						<p class="desc detail">
							<span class="left">简介：</span>
							<span class="detail-sketch">{[vod_desc]}</span>
							<span class="detail-content" style="display: none;">{[dinfo.vod_content]}</span>
							<a class="detail-more" href="javascript:;">详情 <i class="icon iconfont icon-moreunfold"></i></a>
						</p>
						<div class="play-btn">
							<a :href="fast_play" @click.prevent="lazyPlay(fast_play)">立即播放</a>
<!--							<a href="">收藏</a>-->
						</div>
					</div>
					<div class="stui-content__side">
						<p><img class="qrcode" width="150" height="150" style="padding: 10px; background-color: #fff;" /></p>
						扫码用手机观看
					</div>
				</div>

				<div v-for="(vod_tab,index) in vod_tabs" class="stui-vodlist__head">
				<span class="pull-right1">无需安装任何插件</span>
				<h3 class="title"><i class="iconfont icon-iconfontplay2"></i> 	{[vod_tab]}</h3>
					<ul class="stui-content__playlist clearfix">
						<li v-for="vod_url in vod_urls[index]">
							<a :href="vod_url.url" @click.prevent="lazyPlay(vod_url.url)">{[vod_url.name]}</a>
						</li>
				   </ul>
				</div>

				<div class="stui-vodlist__head">
					<h3><a href="/vod/show/"><i class="iconfont icon-hot"></i> 猜你喜欢</a></h3>
				</div>
				<ul class="stui-vodlist clearfix">
<!--					<li style="display: none">-->
<!--						<div class="stui-vodlist__box">-->
<!--							<a class="stui-vodlist__thumb lazyload" href="/v/108223/" title="龙门镇" data-original="http://img.test.com/upload/vod/20230508-1/2585c6dc94d917baa383d3ffa04954f5.jpg">-->
<!--								<span class="play hidden-xs"></span>-->
<!--								<span class="pic-text1 text-right"><b>电影</b></span>-->
<!--								<span class="pic-text text-right"><b>完结</b></span>-->
<!--							</a>-->
<!--							<div class="stui-vodlist__detail">-->
<!--								<h4 class="title text-overflow"><a href="/v/108223/" title="龙门镇">龙门镇</a></h4>-->
<!--								<p class="text text-overflow text-muted hidden-xs">一龙 房岩 祁艳 陈嘉男</p>-->
<!--							</div>-->
<!--						</div>-->
<!--					</li>-->
				</ul>
			</div>
		</div>
		</div>
		</div>
    </div>

    <span class="mac_ulog_set hide" alt="浏览记录" data-type="1" data-mid="1" data-id="49064" data-sid="0" data-nid="0"></span>
    <span class="mac_history_set hide" alt="历史记录" data-name="[电影]黑豹2" data-pic="https://img.liangzipic.com/upload/vod/20221116-1/1f450ee626545c2722b610fe747c8083.jpg"></span>

<!--组件调用一定要右闭合,否则后面的代码无法正常运行-->
<!--vue组件-版权信息-->
	<copy-right path="{{ctx.path}}" web_name="{{ctx.web_name}}" ></copy-right>
<!--vue组件-底部按钮-->
	<foot-button></foot-button>
<!--vue组件-弹窗信息-->
	<note-popup path="{{ctx.path}}" url="{{ctx.url}}"></note-popup>

</div>
<!--vue结束-->

<script>
const { createApp,defineEmits,reactive, toRefs, ref,getCurrentInstance,onBeforeMount, onMounted,onBeforeUpdate,onUpdated,onBeforeUnmount, onUnmounted, watch,computed } = Vue;
const app = createApp({
	delimiters: ['{[', ']}'],//delimiters：改变默认的插值符号
	props: {},
	setup(props, context) {
		onMounted(()=> {
			console.log('---onMounted---');
			axios.get(`/vod?pwd=${pwd}&rule=${web_name}&ids=${vod_id}&ac=detail`).then((resp) => {
            	console.log(resp.data);
            	details.value = resp.data;
				// 存浏览器session里，然后其它页面好获取出来
				// sessionStorage.setItem('details',JSON.stringify(resp.data));
				// console.log(typeof(stui.images.lazyload));

				dinfo.value = details.value.list[0];
				dinfo.value.vod_desc = dinfo.value.vod_content.slice(0,100)+'...';
				$('meta[name="description"]').attr('content',dinfo.value.vod_name+'剧情:'+dinfo.value.vod_content);
				setTimeout(function (){
					stui.images.lazyload();
					stui.images.carousel();
				},300);
        	});

			//
			// axios.get(`/hotsugg`).then((resp) => {
			// 	console.log(resp.data);
			// 	hotsuggs.value = resp.data;
			// 	sessionStorage.setItem('hotsuggs',JSON.stringify(resp.data));
        	// });
		});
		onBeforeUnmount(()=>{
        //销毁页面组件前， 即关闭
        console.log("*******onBeforeUnmount******")
    	});
		onUnmounted(()=>{
			//销毁后
			console.log("*******onUnmounted******")
		});

		console.log('---setup---');
		//获取当前实例
		const {self, proxy} = getCurrentInstance();
		const web_name = '{{ctx.web_name}}';
		const pwd = '{{ctx.pwd}}';
		const tid = '{{ctx.tid}}';
		const vod_id = '{{ctx.vod_id}}';
		const vod_name = '{{ctx.vod_name}}';
		console.log(web_name);
		// 图片不加载问题???
		// const items = ref({"class":[{"type_id":"1","type_name":"电影"},{"type_id":"2","type_name":"电视剧"},{"type_id":"3","type_name":"综艺"},{"type_id":"4","type_name":"动漫"},{"type_id":"5","type_name":"哔哩"}],"list":[{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/49064/","vod_name":"黑豹2","vod_pic":"https://img.liangzipic.com/upload/vod/20221116-1/1f450ee626545c2722b610fe747c8083.jpg","vod_remarks":"完结"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/49311/","vod_name":"满江红","vod_pic":"https://img.liangzipic.com/upload/vod/20230125-1/d483055d1f3dfc2cf1f758ab1bbee54e.jpg","vod_remarks":"完结"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48994/","vod_name":"无名","vod_pic":"https://img.liangzipic.com/upload/vod/20230202-1/61e57ef2332e0d3a58efba85af31b8d4.jpg","vod_remarks":"完结"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/49349/","vod_name":"流浪地球2","vod_pic":"https://img.liangzipic.com/upload/vod/20230123-1/740fab8bae29be447749777b08e66b61.jpg","vod_remarks":"HD国语"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/47473/","vod_name":"毒舌律师","vod_pic":"https://img.liangzipic.com/upload/vod/20230307-1/2e9deaa0d9eac305d0ec64b8002a5801.jpg","vod_remarks":"TC国语"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48160/","vod_name":"交换人生2023","vod_pic":"https://img.liangzipic.com/upload/vod/20230224-1/1e917fe9ac694ffcc4ce28cd46f93156.jpg","vod_remarks":"HD"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107952/","vod_name":"侠盗之簪花乱","vod_pic":"http://img.test.com/upload/vod/20230505-1/c9f06d89004ed80002843ccc849c5777.jpg","vod_remarks":"HD国语"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/108177/","vod_name":"微不足道","vod_pic":"http://img.test.com/upload/vod/20230213-19/aa9cd71d67f141f4493a406ab5aaed2c.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48379/","vod_name":"少年吔，安啦！","vod_pic":"https://img.liangzipic.com/upload/vod/20230218-1/74960fc4f8b9b492ad6a1f6ab3bf608a.jpg","vod_remarks":"HD国语"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48348/","vod_name":"大毒枭","vod_pic":"https://img.liangzipic.com/upload/vod/20230219-1/8ff8e1e37ad4b75c377e124363243e3a.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48287/","vod_name":"豺狼的日子","vod_pic":"https://img.liangzipic.com/upload/vod/20230221-1/19898f52b154346736b095c3f3bf846d.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48242/","vod_name":"相约在今生","vod_pic":"https://img.liangzipic.com/upload/vod/20230222-1/4b978ab6a451d5c904b0cedf0b2b7fe7.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48232/","vod_name":"圣徒指南","vod_pic":"https://img.liangzipic.com/upload/vod/20230222-1/33d73b420773bcdc0f2140b71595b448.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/32925/","vod_name":"善意的背叛","vod_pic":"https://pic7.iqiyipic.com/image/20210915/60/44/v_153114876_m_601_m1_579_772.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/24761/","vod_name":"纽约大逃亡","vod_pic":"https://pic5.iqiyipic.com/image/20210916/0c/e4/v_109867443_m_601_m7_579_772.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/19184/","vod_name":"我一直知道你去年夏天干了什么","vod_pic":"https://puui.qpic.cn/vcover_vt_pic/0/l5uhu4tvu89tidqt1444907491.jpg/770","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48381/","vod_name":"浑身是劲1984","vod_pic":"https://img.liangzipic.com/upload/vod/20230218-1/ecead29b6afecfd65d745c98f59b6996.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/48359/","vod_name":"炮弹飞车","vod_pic":"https://img.liangzipic.com/upload/vod/20230219-1/38f988c9de4d1b62c5ea31964b714a43.jpg","vod_remarks":"HD中字"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107075/","vod_name":"战火中的青春","vod_pic":"http://m.ykimg.com/050C00006444E3941427220AE6B4613A","vod_remarks":"更新至25集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/85418/","vod_name":"长月烬明","vod_pic":"http://m.ykimg.com/050C0000642E60181427220B3D761907","vod_remarks":"更新至38集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107914/","vod_name":"又见仲夏夜之星","vod_pic":"https://img.liangzipic.com/upload/vod/20230504-1/8326ba29482feed945ab926f825dee45.jpg","vod_remarks":"更新至10集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/96611/","vod_name":"凌云志","vod_pic":"http://m.ykimg.com/050C000063F3060213EB660AD1C42151","vod_remarks":"更新至31集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107810/","vod_name":"平凡之路","vod_pic":"https://puui.qpic.cn/vcover_vt_pic/0/mzc00200k1qzwd51667457705800/0","vod_remarks":"更至14集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107717/","vod_name":"云襄传","vod_pic":"https://img.liangzipic.com/upload/vod/20230501-1/a79b1b7fdf3ca5b8bab06d0f6d8dd833.jpg","vod_remarks":"更新至18集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107548/","vod_name":"破事精英2","vod_pic":"https://pic7.iqiyipic.com/image/20230428/40/85/a_100517919_m_601_m8_260_360.jpg","vod_remarks":"更新至22集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107936/","vod_name":"门当户怼","vod_pic":"http://m.ykimg.com/050C0000642139322052EE0B04C5E6B9","vod_remarks":"更新至22集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/108154/","vod_name":"外婆的新世界","vod_pic":"http://img.test.com/upload/vod/20230507-1/d84ffcd80c57139b0608d4de9bad7194.jpg","vod_remarks":"更新至3集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/106996/","vod_name":"无眠之境","vod_pic":"http://img.test.com/upload/vod/20230423-1/5b132dea563990bcc1041a2c898bf160.jpg","vod_remarks":"更新至18集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107553/","vod_name":"那场雨爱上你","vod_pic":"http://img.test.com/upload/vod/20230430-1/5a3590957fc36f8d62b69ce3d35fc2e9.jpg","vod_remarks":"更新至第02集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/106540/","vod_name":"男妓","vod_pic":"https://tuhaotv.oss-cn-hangzhou.aliyuncs.com/upload/vod/20230417-1/099d57e2f1cbcca6a339ebf764db0f9d.jpg","vod_remarks":"更新至第09集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/106482/","vod_name":"妈妈咪呀第八季","vod_pic":"https://pic4.iqiyipic.com/image/20230415/a3/0d/a_100533499_m_601_m1_260_360.jpg","vod_remarks":"更新至2023-5-6期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/96330/","vod_name":"青春环游记第四季","vod_pic":"https://img.liangzipic.com/upload/vod/20230409-1/46a582d94e1f8338db4df2b92168921b.jpg","vod_remarks":"更新至20230506期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/78075/","vod_name":"追星星的人第三季","vod_pic":"https://pic7.iqiyipic.com/image/20230311/30/4b/a_100530604_m_601_m4_579_772.jpg","vod_remarks":"更新至2023-5-6期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/80/","vod_name":"金牌调解","vod_pic":"https://pic6.iqiyipic.com/image/20220222/40/f0/a_50907959_m_601_m18_579_772.jpg","vod_remarks":"20230506期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107983/","vod_name":"台柱子","vod_pic":"https://img.liangzipic.com/upload/vod/20230505-1/350a0c832c5aba7d65c85f5e590cb6ca.jpg","vod_remarks":"更新至2023-5-7期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107988/","vod_name":"爸爸当家第二季","vod_pic":"https://img.liangzipic.com/upload/vod/20230505-1/5971ba5d46de1afadbba32ef15822e95.jpg","vod_remarks":"更新至2023-05-07期期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/108112/","vod_name":"妙不可言","vod_pic":"https://img.liangzipic.com/upload/vod/20230507-1/d6781fafc74fe2ff500c61ff759457fc.jpg","vod_remarks":"更新至20230506期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/108100/","vod_name":"中国说唱巅峰对决2023","vod_pic":"https://pic8.iqiyipic.com/image/20230506/ca/d8/a_100517503_m_601_m15_260_360.jpg","vod_remarks":"更新至2023-5-7期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/78562/","vod_name":"甜蜜的任务2023","vod_pic":"https://2img.hitv.com/preview/sp_images/2023/01/17/202301171806216388531.jpg","vod_remarks":"更新至2023-05-07期期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/78226/","vod_name":"声生不息·宝岛季","vod_pic":"https://0img.hitv.com/preview/sp_images/2023/03/13/202303130943459677164.jpg","vod_remarks":"更新至2023-05-07期期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/26620/","vod_name":"种地吧","vod_pic":"https://pic2.iqiyipic.com/image/20230203/20/f1/a_100517523_m_601_m5_579_772.jpg","vod_remarks":"更新至2023-5-7期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/84950/","vod_name":"声生不息·宝岛季卫视版","vod_pic":"https://img.liangzipic.com/upload/vod/20230326-1/570c3b1c6059915d1068a8cc579bcdcc.jpg","vod_remarks":"更新至2023-05-07期期"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/26993/","vod_name":"绝世战魂动态漫画","vod_pic":"https://pic2.iqiyipic.com/image/20211028/93/7f/a_100445493_m_601_m3_579_772.jpg","vod_remarks":"全剧集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107013/","vod_name":"青莲剑仙传","vod_pic":"http://img.test.com/upload/vod/20230423-1/e4a96f7369355b83e41a2a026b5efdb1.jpg","vod_remarks":"全剧集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/33639/","vod_name":"噬神纪","vod_pic":"https://m.ykimg.com/0527000063ABEBB52052EE09928EB7EA","vod_remarks":"更至29集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/120/","vod_name":"斗破苍穹年番","vod_pic":"https://puui.qpic.cn/vcover_vt_pic/0/mzc0020027yzd9e1656210118396/770","vod_remarks":"更至43集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/108/","vod_name":"武神主宰","vod_pic":"https://puui.qpic.cn/vcover_vt_pic/0/7q544xyrava3vxf1610952810187/770","vod_remarks":"更至330集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/96/","vod_name":"绝世武魂","vod_pic":"https://puui.qpic.cn/vcover_vt_pic/0/mzc00200no18bci1596439143337/770","vod_remarks":"更至268集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/33/","vod_name":"妖神记","vod_pic":"https://pic9.iqiyipic.com/image/20200916/6c/34/a_100051664_m_601_m6_579_772.jpg","vod_remarks":"更至310集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/78407/","vod_name":"仙武传","vod_pic":"https://img.liangzipic.com/upload/vod/20230319-1/278cafaa4be6bdccf986fdcbc11b8454.jpg","vod_remarks":"更新至9集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/33637/","vod_name":"最强主宰","vod_pic":"https://m.ykimg.com/0527000063A0069213E74209C3D7E047","vod_remarks":"更至07集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/33621/","vod_name":"剑域风云","vod_pic":"https://m.ykimg.com/0526000061A2E34613F7FF09852232C5","vod_remarks":"更新至74集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/33549/","vod_name":"星河至尊","vod_pic":"https://m.ykimg.com/05260000625516D72037DD092DB4F0D9","vod_remarks":"全剧集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/118/","vod_name":"假面骑士极狐","vod_pic":"https://pic2.iqiyipic.com/image/20230106/74/bc/a_100526365_m_601_m2_579_772.jpg","vod_remarks":"更新至18集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/43805/","vod_name":"我是不白吃","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/205c8d7027e989044ae7711879c2f66f14bfa206.jpg","vod_remarks":"更新至555集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/43837/","vod_name":"元气食堂","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/a1b5c728fd5cc0a608cecf5263e23966f69a2c8f.jpg","vod_remarks":"全剧集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/43800/","vod_name":"星座狗联盟","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/38d268945aee0a00675b10132008592a8b3f14e6.png","vod_remarks":"更新至242集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/43839/","vod_name":"阿衰第九季","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/1e4432377f9692c2891974c199e8670864c756cc.jpg","vod_remarks":"更新至29集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/47147/","vod_name":"邻家的天使同学","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/feb72632146135571b144a15618c5880a19f8214.png","vod_remarks":"更新至11集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/96353/","vod_name":"名侦探柯南：犯人犯泽先生","vod_pic":"http://i0.hdslb.com/bfs/bangumi/image/38e2a273f528fd01c34f1fc4df0f69c64487efad.png","vod_remarks":"更新至6集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/96352/","vod_name":"名侦探柯南：犯人犯泽先生（中配）","vod_pic":"http://i0.hdslb.com/bfs/bangumi/image/38e2a273f528fd01c34f1fc4df0f69c64487efad.png","vod_remarks":"更新至6集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/107081/","vod_name":"赘婿","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/9e31f665d2d1a93c157b7b1a2c9ae02d26642899.png","vod_remarks":"更新至6集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/108149/","vod_name":"超元绝战","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/a41ec03de05e444d984258c0fbb7e0792b99a80e.jpg","vod_remarks":"更新至5集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/85561/","vod_name":"假面骑士极狐（中配）","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/e5a6c85d04ddaaf5b65fac1520677a041058ea1b.png","vod_remarks":"更新至18集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/85560/","vod_name":"假面骑士极狐","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/e5a6c85d04ddaaf5b65fac1520677a041058ea1b.png","vod_remarks":"更新至18集"},{"no_use":{"type_id":1,"type_name":"首页推荐","vod_content":""},"vod_id":"https://www.5imv.cc/v/43817/","vod_name":"萌芽熊","vod_pic":"https://i0.hdslb.com/bfs/bangumi/image/d2b309d46aa759277a04650bd291f867e3084d6e.jpg","vod_remarks":"更新至93集"}],"no_use":{"code":1,"limit":6,"msg":"数据列表","now_count":66,"page":1,"pagecount":11,"total":66}})
		const ctx_str = "ctxObj={{ctx|safe}}";
		eval(ctx_str);
		// console.log(ctxObj)
		const ctx = ref(ctxObj);
		const items = ref({
			class:[],
			list:[],
		});

		const details = ref({
			list:[],
		});

		const dinfo = ref({
			vod_content:''
		});

		// const hotsuggs = ref({"code":200,"count":50,"data":[{"title":"漫长的季节","url":""},{"title":"你给我的喜欢","url":""},{"title":"奔跑吧 第7季","url":""},{"title":"斗破苍穹年番","url":""},{"title":"完美世界","url":""},{"title":"平凡之路","url":""},{"title":"斗罗大陆","url":""},{"title":"画江湖之不良人 第6季","url":""},{"title":"云襄传","url":""},{"title":"满江红","url":""},{"title":"遮天","url":""},{"title":"只是结婚的关系","url":""},{"title":"哈哈哈哈哈 第3季","url":""},{"title":"星辰变 第5季","url":""},{"title":"吞噬星空","url":""},{"title":"极限挑战 第9季","url":""},{"title":"月升沧海","url":""},{"title":"听说你喜欢我","url":""},{"title":"雪中悍刀行","url":""},{"title":"无间","url":""},{"title":"小猪佩奇第9季","url":""},{"title":"流浪地球2","url":""},{"title":"迪迦奥特曼 普通话版","url":""},{"title":"宝贝赳赳 第五季","url":""},{"title":"天赐的声音 第4季","url":""},{"title":"银河护卫队","url":""},{"title":"一人之下 第5季","url":""},{"title":"我们的婚姻","url":""},{"title":"全职法师 第6季","url":""},{"title":"汪汪队立大功第八季","url":""},{"title":"青春环游记 第4季","url":""},{"title":"欢乐颂4","url":""},{"title":"新三国","url":""},{"title":"扫黑风暴","url":""},{"title":"黑豹2","url":""},{"title":"《人生路不熟》主创漫谈","url":""},{"title":"爱情而已","url":""},{"title":"长月烬明","url":""},{"title":"王牌对王牌 第8季","url":""},{"title":"你是我的荣耀","url":""},{"title":"大话西游之大圣娶亲·加长纪念版","url":""},{"title":"陈情令","url":""},{"title":"熊出没之冬日乐翻天","url":""},{"title":"新僵尸先生","url":""},{"title":"沸腾人生","url":""},{"title":"银河护卫队2","url":""},{"title":"那年花开月正圆","url":""},{"title":"名侦探柯南 普通话版","url":""},{"title":"云顶天宫","url":""},{"title":"欢乐颂","url":""}],"msg":"获取成功"});
		const hotsuggs = ref({
			data:[]
		});

		const vod_desc = computed(() => {
			console.log('计算vod_desc');
  			return dinfo.value.vod_content?dinfo.value.vod_content.slice(0,100)+'...':'';
		});

		const vod_tabs = computed(() => {
			console.log('计算vod_tabs');
  			return dinfo.value.vod_play_from?dinfo.value.vod_play_from.split('$$$'):[];
		});

		const vod_urls = computed(() => {
			console.log('计算vod_urls');
			let urls = [];
			if(dinfo.value.vod_play_url){
				let tab_urls = dinfo.value.vod_play_url.split('$$$');
				tab_urls.forEach(((tab_url,index)=>{
					let vurls = tab_url.split('#').map(it=>{return {name:it.split('$')[0],url:it.split('$')[1]}});
					urls.push(vurls);
				}));
			}
			console.log(urls);
  			return urls
		});

		const fast_play = computed(() => {
			console.log('fast_play');
  			return vod_urls.value&&vod_urls.value.length>0?vod_urls.value[0][0].url:'';
		});
		const is_home = ref(true);
		try {
		items.value = JSON.parse(sessionStorage.getItem('items'))||items.value;
		hotsuggs.value = JSON.parse(sessionStorage.getItem('hotsuggs'))||hotsuggs.value;
		}catch (e) {}

		const iframeSrc = ref('');
		const iframeShow = ref(false);
		const photoVisible = ref(false);
		const iframeRef = ref(null);
		var sniffer;
		const {isVideo,getRealUrl} = commonUtil;
		// get302UrlResponse('/vod?pwd=dzyyds&rule=007影视&ext=&play_url=https%3A//www.007ts.me/play/69636-3-1.html',(resp)=>{
		// 	console.log('重定向到:',resp);
		// });
		// getRealUrl('/vod?pwd=dzyyds&rule=007影视&ext=&play_url=https%3A//www.007ts.me/play/69636-3-1.html',(res)=>{
		// 	console.log('重定向到:',res);
		// });
		const methods = {
			async lazyPlay(url){
				iframeShow.value = true;
				console.log('准备处理播放地址:'+url);
				clearInterval(sniffer);
				try {
					if(isVideo(url)){
						console.log('直接播放');
						methods.setPlayUrl(url);
						return
					}
					const res =await getRealUrl(url,(resp)=>{
						// console.log('代理数据:',resp.data);
						return resp.data
					});
					// console.log(res);
					let res_data = res.data;
					try {
						res_data = JSON.parse(res_data);
					}catch (e) {

					}
					// console.log(res_data);
					// console.log(res.url);
					// console.log(res.redirect);
					if(res.redirect){ // 重定向的直接设置播放器的值
						if(isVideo(res.url)){ // 判断重定向的为直链
							methods.setPlayUrl(res.url);
							return
						}else{
							console.log('重定向待嗅探页面,但是由于跨域问题,只好内嵌播放页播放');
							iframeSrc.value = res.url;
						}
						console.log(location.href);
						if(location.href.includes('debug=1')){
							throw new Error('重定向网页直接播放,尝试嗅探(存在跨域无法嗅探问题,暂时考虑直接内嵌人家的播放页)');
						}else{
							return
						}
					}

					// const res = await axios.get(url,{maxRedirects: 0});
					// const { status, headers: { Location } } = res;
					// // console.log(status);
					// console.log(res.request.responseURL);
					// if (status === 302) {
					// 	console.log(Location);
					// }
					// console.log(res.data);

					console.log(res_data);
					if(typeof(res_data)==='string'){
						iframeRef.value.contentWindow.location.reload();
						iframeSrc.value = url;
						throw new Error('返回的数据是文本无法直接播放,尝试嗅探');
					} else if(!res_data.parse&&res_data.url){
						methods.setPlayUrl(res_data.url);
					}else if(/url=/.test(res_data.url)){
						iframeSrc.value = res_data.url;
					} else if((res_data.parse||res_data.jx)&&res_data.url){
						console.log(ctx.value);
						iframeSrc.value = res_data.url;
						if(confirm('该视频来自其它正版地址,drpy网页暂未实现解析功能,是否跳到正版站通过油猴插件等手段播放?')){
							open(res_data.url);
						}
					}
				}catch (e) {
					console.log('抓到了错误:'+e.message);
					console.log('iframeSrc.value:',iframeSrc.value);
					iframeSrc.value = url;
					const total_time = 10000;
					var counter = 1; // 嗅探计数
					var speeder = 250; // 嗅探间隔
					var total_counter = total_time/speeder;
					let iframeWindow = iframeRef.value.contentWindow;

					console.log(`开始嗅探,最多嗅探:${total_counter}次...`);
					sniffer = setInterval(function (){
						console.log(`第${counter}次嗅探开始`);
						if(counter >= total_counter){
							clearInterval(sniffer);
							console.log(`嗅探超时并结束,共计嗅探:${counter}次`);
							return
						}
						try {
							let resources = iframeWindow.performance.getEntriesByType('resource');
							console.log(resources);
							for(const resource of resources){
								let res_url = resource.name;
								let res_url2 = res_url.split('?')[0];
								if(res_url.endsWith('.m3u8')||res_url2.endsWith('.m3u8')){
									console.log(`嗅探到m3u8文件:${res_url},共计嗅探:${counter}次`);
									clearInterval(sniffer);
									methods.setPlayUrl(res_url);
									break;
								}else if(res_url.endsWith('.mp4')||res_url2.endsWith('.mp4')){
									console.log(`嗅探到mp4文件:${res_url},共计嗅探:${counter}次`);
									clearInterval(sniffer);
									methods.setPlayUrl(res_url);
									break;
								}else if(/\.(m4a|mp3|flv|aac)$/.test(res_url)||/\.(m4a|mp3|flv|aac)$/.test(res_url2)){
									console.log(`嗅探到音频文件:${res_url},共计嗅探:${counter}次`);
									clearInterval(sniffer);
									methods.setPlayUrl(res_url);
									break;
								}
							}
						}catch (e) {
							console.log(`第${counter}次嗅探发生错误:`,e.message);
						}
						console.log(`第${counter}次嗅探完毕`);
						counter+=1;

					},speeder);

				}
			},
			showBigImage(e) {//点击图片函数，点击后，把photoVisible设置成true
				// console.log('showBigImage:',e);
				if (e !== "") {
				  // this.photoVisible = true; // 这样也可以
					photoVisible.value = true;
				}
			},
			openTestVideo(e){
				methods.lazyPlay('https://sf9-dycdn-tos.pstatp.com/obj/tos-cn-i-8gu37r9deh/7c399215485c40cb9f1d1da640354a12?filename=1.mp4');
				// iframeSrc.value = ctx.value.path+'?url='+'https://sf9-dycdn-tos.pstatp.com/obj/tos-cn-i-8gu37r9deh/7c399215485c40cb9f1d1da640354a12?filename=1.mp4';
			},
			setPlayUrl(url){
				if(url.includes('url=')){
					url = url.split('url=')[1];
				}
				iframeSrc.value = ctx.value.path+'?url='+url;
			}
		}
		return {
			...methods,
			ctx,
			items,
			is_home,
			hotsuggs,
			web_name,
			tid,
			vod_id,
			vod_name,
			details,
			dinfo,
			vod_desc,
			vod_tabs,
			vod_urls,
			fast_play,
			iframeSrc,
			iframeShow,
			photoVisible,
			iframeRef,
			sniffer,
			isVideo,getRealUrl
		}
	},
});
// 默认请求的基础url（如果axios请求的地址不带域名，自动添加baseURL）（默认请求域名，/当前域名）
axios.defaults.baseURL = "/";
// 设置post请求头的content-Type值
// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
axios.defaults.headers.post['Content-Type'] = 'application/json';
// 请求超时5000毫秒
axios.defaults.timeout = 5000;
axios.defaults.withCredentials = true;
app.config.globalProperties.$http = axios;
console.log('---这里最先执行---');
app.component('copy-right',  copyRightComponent);
app.component('foot-button', footButtonComponent);
app.component('note-popup',  notePopup);
app.component('stu-header', stuHeaderComponent);
app.component('stu-image', StuImageComponent);
app.mount('#app');
eruda.init();

</script>

<!--<script src='/web/cms/mxpro/js/rich-tf.js' id="richid" data='s=7214'></script>-->
<!--<script charset="UTF-8" id="LA_COLLECT" src="/web/cms/mxpro/js/js-sdk-pro.min.js"></script>-->
<!--<script>LA.init({id:"JYQUFCtAOBTUMsNQ",ck:"JYQUFCtAOBTUMsNQ"})</script>-->
<script type="text/javascript" src="/web/cms/mxpro/js/stui_default.js "></script>

<!--弹窗样式和自动弹窗方法-->
<link rel="stylesheet" href="/web/cms/mxpro/css/notice.css" type="text/css">
<script type="text/javascript" src="/web/cms/mxpro/js/mxhtml.js"></script>

<script type="text/javascript">

$(".stui_header__user li a").click(function(){
	$(this).parent().find(".dropdown").toggle();
});
function notnull() {
if (window.document.search.wd.value=="") {
alert("您未输入任何信息！");
return false;
}else {
return true;
}
}
$(function(){
	$(window).scroll(function() {
		if($(window).scrollTop() >= 100){
			$('.ant-back-top').fadeIn(300);
		}else{
			$('.ant-back-top').fadeOut(300);
		}
	});
	$('.ant-back-top').click(function(){
	$('html,body').animate({scrollTop: '0px'}, 800);});
});
function openFullScreen(){
	console.log('点击全屏');
	let elem = document.getElementById('iframe-player');
	if (elem.requestFullScreen) {
		elem.requestFullScreen();
	} else if (elem.mozRequestFullScreen) {/* Firefox */
		elem.mozRequestFullScreen();
	} else if (elem.webkitRequestFullScreen) { /* Chrome, Safari and Opera */
		elem.webkitRequestFullScreen();
	} else if (elem.msRequestFullScreen) { /* IE/Edge */
		elem.msRequestFullScreen();
	}
}
</script>

</body>
</html>